# Include variables values and other RIDE debug information
# trace = true # false by default

address = "3PCH3sUqeiPFAhrKzEnSEXoE2B6G9YNromV"

request {
  # EXPR evaluation - higher priority than Invocation. If this specified, other fields are ignored
  # expr = "foo(1)"

  # All fields below relate to invocation evaluation.

  # Represents FUNCTION_CALL in RIDE
  call {
    function = foo
    args = [
      {
        type = integer # boolean | string | binary | list
        value = 1 # RIDE constant according to specified type
      }
    ]
  }

  sender = "3PP2fh5162huUzvKywTBD3W3X7xzdXwf47e"
  senderPublicKey = "EJ67f6UsZ59Su6gHSWDGeJEF7AhxJMwaDvgMVcPKvS1G"

  # Won't work without senderPublicKey
  # Note, there is no "s" in the end
  payment = [
    {
      amount = 1
      assetId = "8LQW8f7P5d5PZM7GtZEBgaqRPGSzS3DfPuiXrURJ4AJS"
    }
  ]
}

height = 3296627
extraFeatures = [19]

settings {
  blockchain {
    addressSchemeCharacter = W
    functionalitySettings {}
    genesisSettings {
      blockTimestamp = 0
      timestamp = 0
      initialBalance = 0
      signature = null
      transactions = []
      initialBaseTarget = 0
      averageBlockDelay = 1s
    }
    rewardsSettings {
      term = 100000
      initial = 600000000
      minIncrement = 50000000
      votingInterval = 10000
    }
  }
}

accounts {
  "3P6GhtTsABtYUgzhXTA4cDwbqqy7HqruiQQ" {
    data {
      a {
        type = integer
        value = 11
      }
    }
  }

  "3PCH3sUqeiPFAhrKzEnSEXoE2B6G9YNromV" {
    scriptInfo {
      # script = "base64:BgIJCAISAwoBARIAAAIDaW52AQNmb28BAXgEBWFsaWNlCQEHQWRkcmVzcwEBGgFXL5/Fz4gGlkaCSEAbf8uylyx1B+Ny/slBBARjYXJsCQCkCAEJAQVBbGlhcwECBGNhcmwEA2JvYgkBB0FkZHJlc3MBARoBV4Wg1svxeugOVlcbK9a4jmR8i8ouk6hOhQQEamFuZQkBB0FkZHJlc3MBARoBVyEoM6f/gSFd+RNQzXM4AF1rvNSkyHC+2QQFYXNzZXQBIGz6av/F7aqMC3+1KpPSogwvgoLbdHoEjFP7/RMfc6D/BAR0eElkASB0tuyO3/DmGDy8ZUk1j9FivSAKxvHuBubAB7gCv3b4dgQCeDEJARFAZXh0ck5hdGl2ZSgxMDUwKQIFBWFsaWNlAgFhBAJ4MgAABAJ4MwkA8AcCBQNib2IFBWFzc2V0BAJ4NAgJAQV2YWx1ZQEJAOwHAQUFYXNzZXQIZGVjaW1hbHMEAng1CAkBBXZhbHVlAQkA7QcBAPOayQEGaGVpZ2h0BAJ4NgkAyAEBCQEFdmFsdWUBCQDxBwEFBHRoaXMEAng3CQEFdmFsdWUBCQDpBwEFBHR4SWQEAng4CAkBBXZhbHVlAQkA7gcBBQR0eElkBmFtb3VudAQCeDkICQDvBwEFBGNhcmwJYXZhaWxhYmxlBAN4MTAKAAFACQD8BwQFBHRoaXMCA2JhcgUDbmlsBQNuaWwDCQABAgUBQAIDSW50BQFACQACAQkArAICCQADAQUBQAIYIGNvdWxkbid0IGJlIGNhc3QgdG8gSW50BAJ5MQUGaGVpZ2h0BAJ5MggFCWxhc3RCbG9jawZoZWlnaHQJAJQKAgkAzAgCCQEOU2NyaXB0VHJhbnNmZXIDBQNib2IAAQUFYXNzZXQFA25pbAkAZAIJAGQCCQBkAgkAZAIJAGQCCQBkAgkAZAIJAGQCCQBkAgkAZAIJAGQCCQBkAgkAZAIFAXgFAngxBQJ4MgUCeDMFAng0BQJ4NQUCeDYFAng3BQJ4OAUCeDkFA3gxMAUCeTEFAnkyAP////////8PA2ludgEDYmFyAAQCeDEDCQELdmFsdWVPckVsc2UCCQCgCAECAWIHAAEAAAkAlAoCBQNuaWwFAngxAMxU60w="
      script = """
        {-# STDLIB_VERSION 6 #-}
        {-# SCRIPT_TYPE ACCOUNT #-}
        {-# CONTENT_TYPE DAPP #-}

        @Callable(inv)
        func foo (x : Int) = {
          let alice = Address(base58'3P6GhtTsABtYUgzhXTA4cDwbqqy7HqruiQQ')
          let carl = addressFromRecipient(Alias("carl"))
          let bob = Address(base58'3PP2fh5162huUzvKywTBD3W3X7xzdXwf47e')
          let jane = Address(base58'3P4xDBqzXgR8HyXoyNn1C8Bd88h4rsEBMHA')
          let asset = base58'8LQW8f7P5d5PZM7GtZEBgaqRPGSzS3DfPuiXrURJ4AJS'
          let txId = base58'8rc5Asw43qbq7LMZ6tu2aVbVkw72XmBt7tTnwMSNfaNq'
          let x1 = getIntegerValue(alice, "a")
          let x2 = 0 # if (isDataStorageUntouched(carl)) then 1 else 0 # Not supported for now
          let x3 = assetBalance(bob, asset)
          let x4 = value(assetInfo(asset)).decimals
          let x5 = value(blockInfoByHeight(3296627)).height
          let x6 = size(value(scriptHash(this)))
          let x7 = value(transactionHeightById(txId))
          let x8 = value(transferTransactionById(txId)).amount
          let x9 = wavesBalance(carl).available
          strict x10 = invoke(this, "bar", nil, nil).exactAs[Int]
          let y1 = height
          let y2 = lastBlock.height
          ([ScriptTransfer(bob, 1, asset)], x + x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 + x9 + x10 + y1 + y2 + 9007199254740991)
        }

        @Callable(inv)
        func bar () = {
          let x1 = if (valueOrElse(getBoolean("b"), false)) then 1 else 0
          (nil, x1)
        }
      """
    }
  }

  "3PP2fh5162huUzvKywTBD3W3X7xzdXwf47e" {
    aliases = ["carl"]
    balance {
      WAVES = 500100
      "8LQW8f7P5d5PZM7GtZEBgaqRPGSzS3DfPuiXrURJ4AJS" = 1
    }
    leasing {
      in = 10
      out = 100
    }
  }
}

assets {
  "8LQW8f7P5d5PZM7GtZEBgaqRPGSzS3DfPuiXrURJ4AJS" {
    decimals = 8
    description = Bitcoin
    quantity = 21000000
    reissuable = true
    # Not supported for now
    # script = "base64:BQkAAGYAAAACBQAAAAZoZWlnaHQAAAAAAAAAAABXs1wV" # height > 0
  }
}

blocks {
  3296627 {
    VRF = "GHC3DQuW9ncm5sNy5u3TVEF4CXu1fsLVHVHYxJzuZr7b"
    baseTarget = 130
    generationSignature = "CrAWgWGpWcH81bZHchdJsjXe4ngh16dimZ7pjunt7nZvfrf1y3aV1vVZGuijf8CnBrVbmXsZcav4izfySsQDf8d9U43M37674bvwSv5gCB3cERewfwQNFTZhGXFh6dbMbvx"
    generatorPublicKey = "GtZHNJQGy7RDgP3Jym5mCTVDX3FUKDSesikLhLcyytG5"
    timestamp = 1663299568885
  }
}

transactions {
  "8rc5Asw43qbq7LMZ6tu2aVbVkw72XmBt7tTnwMSNfaNq" {
    amount = 93119130
    assetId = null
    attachment = "test"
    fee = 100000
    feeAsset = null
    feeAssetId = null
    height = 3281000
    proofs = ["base58:4m9DDG9ALcWheRjvL7iaGQzsW5iqocz1nSGVxbRYW74LLjPdUXpc6iYZ8NjKyNdCdfv6ePMveFZLv4iYnpu7BhfQ"]
    recipient = "3PLrCnhKyX5iFbGDxbqqMvea5VAqxMcinPW"
    sender = "3PH5BvuLFZWi2W4n1TgNvQgZsWU33JUm3Dm"
    senderPublicKey = "Cmk3MD7BdByhRPAa8BtVzdB8Yst1dXPLcmgUKCwiQy83"
    timestamp = 1663299600039
    version = 3
  }
}
