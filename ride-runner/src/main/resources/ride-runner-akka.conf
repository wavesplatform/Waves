# Custom phases. Do not modify, highly coupled with the code!
akka {
  loggers = ["akka.event.slf4j.Slf4jLogger"]
  loglevel = "INFO" # | OFF | ERROR | WARNING | INFO | DEBUG
  stdout-loglevel = "WARNING"
  logging-filter = "akka.event.slf4j.Slf4jLoggingFilter"

  http.server.max-connections = 100
  actor.default-dispatcher.fork-join-executor = {
    parallelism-min = 8
    parallelism-max = 8
  }

  coordinated-shutdown.phases {
    ride-blockchain-updates-stream {
      depends-on = [before-cluster-shutdown] # Akka HTTP-related parts are down
    }

    ride-db {
      depends-on = [ride-blockchain-updates-stream]
    }

    ride-api-client {
      depends-on = [ride-blockchain-updates-stream]
    }

    ride-grpc-connector {
      depends-on = [ride-api-client]
    }

    ride-metrics {
      depends-on = [ride-grpc-connector]
    }

    ride-thread-pools {
      depends-on = [ride-grpc-connector, ride-db]
    }
  }
}
